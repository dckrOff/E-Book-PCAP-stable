# Документация проекта "Электронный учебник по дисциплине 'Параллельная архитектура компьютера и программирования'"

## Содержание
1. [Введение](#введение)
2. [Цели и задачи проекта](#цели-и-задачи-проекта)
3. [Архитектура приложения](#архитектура-приложения)
4. [Технологический стек](#технологический-стек)
5. [Структура проекта](#структура-проекта)
6. [Основные компоненты и модули](#основные-компоненты-и-модули)
7. [База данных](#база-данных)
8. [Пользовательский интерфейс](#пользовательский-интерфейс)
9. [Основные фичи и функциональность](#основные-фичи-и-функциональность)
10. [Алгоритмы и логика работы](#алгоритмы-и-логика-работы)
11. [Процесс разработки](#процесс-разработки)
12. [Тестирование](#тестирование)
13. [Заключение и дальнейшее развитие](#заключение-и-дальнейшее-развитие)

## Введение

Проект "Электронный учебник по дисциплине 'Параллельная архитектура компьютера и программирования'" представляет собой мобильное приложение для Android, предназначенное для студентов и преподавателей высших учебных заведений. Приложение обеспечивает доступ к образовательным материалам по дисциплине, позволяет отслеживать прогресс обучения, проходить тесты и изучать глоссарий терминов.

Разработка приложения осуществлялась с использованием современных подходов к проектированию мобильных приложений, включая MVVM архитектуру, Clean Architecture и реактивное программирование. Приложение призвано сделать образовательный процесс более интерактивным, удобным и эффективным.

## Цели и задачи проекта

### Основные цели:
- Создание удобного и современного мобильного приложения для изучения параллельной архитектуры компьютера и программирования
- Предоставление интуитивно понятного интерфейса для доступа к учебным материалам
- Обеспечение возможности отслеживания прогресса обучения
- Поддержка интерактивных элементов и тестирования

### Задачи проекта:
1. Разработать архитектуру приложения, обеспечивающую масштабируемость и удобство сопровождения
2. Реализовать удобную навигацию по учебным материалам
3. Создать систему тестирования знаний с автоматической проверкой
4. Разработать глоссарий терминов с возможностью поиска
5. Внедрить систему закладок и заметок для удобства обучения
6. Реализовать механизм отслеживания прогресса чтения
7. Обеспечить работу приложения в офлайн-режиме
8. Создать адаптивный интерфейс, соответствующий принципам Material Design

## Архитектура приложения

Приложение разработано с использованием современных архитектурных подходов:

### MVVM (Model-View-ViewModel)
В основе архитектуры лежит паттерн MVVM, который обеспечивает:
- Разделение бизнес-логики и представления
- Тестируемость компонентов
- Реактивное обновление пользовательского интерфейса

### Clean Architecture
Приложение структурировано в соответствии с принципами Clean Architecture:
- **Presentation layer** (UI): Activity, Fragments, ViewModels
- **Domain layer** (бизнес-логика): Use Cases, модели предметной области
- **Data layer** (источники данных): Repository, локальная база данных, сетевые вызовы

### Dependency Injection
Для внедрения зависимостей используется Dagger Hilt:
- Централизованное управление зависимостями
- Упрощение тестирования компонентов
- Улучшение модульности приложения

### Реактивное программирование
- Использование Kotlin Coroutines и Flow для асинхронных операций
- LiveData для реактивного обновления UI

## Технологический стек

### Язык программирования
- Kotlin 1.8.x

### SDK
- Минимальная версия Android SDK: 24 (Android 7.0)
- Целевая версия Android SDK: 34 (Android 14)

### Фреймворки и библиотеки
- **UI**:
  - AndroidX AppCompat
  - Material Components
  - ConstraintLayout
  - RecyclerView
  - ViewPager2
  - Navigation Component

- **Архитектурные компоненты**:
  - ViewModel
  - LiveData
  - Room для локального хранения данных
  - Navigation Component для навигации

- **Асинхронное программирование**:
  - Kotlin Coroutines
  - Flow

- **Dependency Injection**:
  - Dagger Hilt

- **Хранение данных**:
  - Room Database
  - Firebase Firestore (облачное хранилище)
  - SharedPreferences

- **Изображения**:
  - Glide для загрузки и кэширования изображений

- **Логирование**:
  - Timber

- **Графики и визуализация**:
  - MPAndroidChart

- **Сериализация**:
  - Gson

- **Работа с сетью**:
  - OkHttp3

## Структура проекта

Проект организован в соответствии с принципами модульности и разделения обязанностей:

```
app/
├── build.gradle.kts           # Конфигурация сборки приложения
├── src/
│   └── main/
│       ├── java/uz/dckroff/pcap/          # Основной код
│       │   ├── data/                      # Слой данных
│       │   │   ├── local/                 # Локальные источники данных
│       │   │   │   ├── dao/               # Data Access Objects
│       │   │   │   ├── entity/            # Сущности базы данных
│       │   │   │   └── AppDatabase.kt     # Конфигурация Room
│       │   │   ├── model/                 # Модели данных
│       │   │   └── repository/            # Репозитории
│       │   ├── di/                        # Dependency Injection
│       │   ├── ui/                        # Пользовательский интерфейс
│       │   │   ├── bookmarks/             # Модуль закладок
│       │   │   ├── content/               # Модуль содержания
│       │   │   ├── dashboard/             # Главный экран
│       │   │   ├── glossary/              # Глоссарий
│       │   │   ├── quiz/                  # Тесты
│       │   │   ├── reading/               # Чтение материалов
│       │   │   └── settings/              # Настройки
│       │   ├── utils/                     # Утилиты и вспомогательные классы
│       │   ├── MainActivity.kt            # Главная активность
│       │   ├── PcapApplication.kt         # Класс приложения
│       │   └── ViewPagerAdapter.kt        # Адаптер для главного ViewPager
│       ├── res/                           # Ресурсы приложения
│       │   ├── drawable/                  # Изображения и иконки
│       │   ├── layout/                    # XML-макеты
│       │   ├── menu/                      # Меню
│       │   ├── navigation/                # Графы навигации
│       │   ├── values/                    # Строки, цвета, стили
│       │   └── xml/                       # Другие XML-ресурсы
│       └── AndroidManifest.xml            # Манифест приложения
└── build/                                # Сгенерированные файлы сборки
```

## Основные компоненты и модули

### PcapApplication
Класс приложения, отвечающий за инициализацию ключевых компонентов:
- Firebase
- Timber для логирования
- Glide для работы с изображениями

### MainActivity
Основная активность приложения:
- Управление навигацией между основными разделами
- Хост для ViewPager2 и Fragment-контейнеров
- Обработка жизненного цикла приложения

### Основные модули

#### Dashboard (Главный экран)
- **DashboardFragment**: Отображает общий прогресс обучения и последние открытые разделы
- **DashboardViewModel**: Управляет данными для главного экрана
- **ChapterAdapter**: Адаптер для отображения глав учебника

#### Content (Содержание)
- **ContentListFragment**: Отображает структуру учебника (главы и разделы)
- **ContentListViewModel**: Управляет данными структуры учебника
- **SectionAdapter**: Адаптер для отображения разделов внутри главы

#### Reading (Чтение)
- **ReadingFragment**: Отображает учебный материал раздела
- **ReadingViewModel**: Управляет загрузкой и отображением контента
- **ContentRenderer**: Отвечает за отрисовку различных типов контента

#### Quiz (Тесты)
- **QuizListFragment**: Отображает список доступных тестов
- **QuizSessionFragment**: Интерфейс прохождения теста
- **QuizResultsFragment**: Показывает результаты теста
- **QuizViewModel**: Управляет данными и логикой тестирования

#### Glossary (Глоссарий)
- **GlossaryFragment**: Отображает список терминов
- **GlossaryDetailFragment**: Показывает детальную информацию о термине
- **GlossaryViewModel**: Управляет данными глоссария

#### Bookmarks (Закладки)
- **BookmarksFragment**: Отображает сохраненные закладки и заметки
- **BookmarksViewModel**: Управляет данными закладок и заметок

#### Settings (Настройки)
- **SettingsFragment**: Интерфейс настроек приложения

### Репозитории

#### ContentRepository
Отвечает за доступ к учебным материалам:
- Загрузка структуры учебника (главы, разделы)
- Получение контента разделов
- Кэширование данных

#### UserProgressRepository
Управляет прогрессом пользователя:
- Отслеживание прочитанных разделов
- Сохранение позиций чтения
- Расчет общего прогресса

#### QuizRepository
Управляет тестами:
- Загрузка вопросов и вариантов ответов
- Проверка правильности ответов
- Сохранение результатов тестирования

#### GlossaryRepository
Работа с терминами глоссария:
- Загрузка списка терминов
- Поиск и фильтрация терминов
- Получение связанных материалов

#### BookmarkRepository
Управляет закладками и заметками:
- Сохранение и удаление закладок
- Управление пользовательскими заметками

## База данных

### Firestore (облачная база данных)
Основной источник данных приложения. Структура коллекций:

#### Коллекция "chapters" (главы)
- **Поля документа:**
  - `title` (string) - название главы
  - `order` (number) - порядок отображения главы
  - `sectionsCount` (number) - количество разделов в главе

#### Вложенная коллекция "sections" (разделы)
- **Путь:** `chapters/{chapterId}/sections`
- **Поля документа:**
  - `title` (string) - название раздела
  - `description` (string) - описание раздела
  - `order` (number) - порядок отображения раздела
  - `progress` (number) - прогресс выполнения (0-100%)
  - `contentUrl` (string) - ссылка на контент
  - `chapterId` (string) - ID родительской главы

#### Коллекция "content" (контент)
Иерархическая структура хранения учебных материалов:
- `content/{chapterId}` - документ главы
- `content/{chapterId}/sections/{sectionId}` - документы с контентом разделов

**Структура элемента контента:**
```javascript
{
  id: string,            // уникальный идентификатор элемента
  type: string,          // тип элемента: 'text', 'code', 'formula', 'table', 'image', 'video'
  
  // В зависимости от типа элемента
  content: string,       // текстовое содержимое
  language: string,      // язык программирования (для кода)
  caption: string,       // подпись
  isHighlighted: boolean, // выделение
  isInline: boolean,     // встроенный элемент
  headers: string[],     // заголовки таблицы
  rows: string[][],      // строки таблицы
  url: string,           // ссылка на ресурс
  // ... и другие поля в зависимости от типа
}
```

#### Коллекция "quizzes" (тесты)
- **Поля документа:**
  - `title` (string) - название теста
  - `description` (string) - описание теста
  - `topic` (string) - тема теста
  - `difficulty` (string) - сложность: 'easy', 'medium', 'hard'
  - `timeLimit` (number) - ограничение времени в минутах
  - `questions` (array) - массив объектов с вопросами

**Структура вопроса:**
```javascript
{
  id: string,             // уникальный идентификатор вопроса
  text: string,           // текст вопроса
  options: string[],      // варианты ответов
  correctOption: number,  // индекс правильного ответа
  explanation: string     // пояснение к правильному ответу
}
```

#### Коллекция "glossary" (глоссарий)
- **Поля документа:**
  - `term` (string) - термин
  - `definition` (string) - определение термина
  - `category` (string) - категория термина
  - `relatedTerms` (array) - связанные термины
  - `relatedSections` (array) - связанные разделы

### Room Database (локальное хранилище)
Используется для кэширования данных и хранения пользовательского прогресса:

#### Таблица "chapters"
- `id` (String) - первичный ключ
- `title` (String) - название главы
- `order` (Int) - порядок отображения
- `progress` (Int) - прогресс изучения
- `lastReadSectionId` (String) - ID последнего прочитанного раздела
- `lastReadPosition` (Int) - последняя позиция чтения
- `lastReadTimestamp` (Long) - время последнего чтения

#### Таблица "sections"
- `id` (String) - первичный ключ
- `title` (String) - название раздела
- `description` (String) - описание раздела
- `order` (Int) - порядок отображения
- `chapterId` (String) - внешний ключ к таблице chapters
- `hasSectionRead` (Boolean) - статус прочтения

#### Таблица "user_progress"
- `id` (Int) - первичный ключ
- `overallProgress` (Int) - общий прогресс обучения
- `completedSections` (Int) - количество завершенных разделов
- `totalSections` (Int) - общее количество разделов

#### Таблица "recent_chapters"
- `chapterId` (String) - первичный ключ
- `timestamp` (Long) - время последнего доступа

#### Таблица "bookmarks"
- `id` (Int) - первичный ключ, автоинкремент
- `chapterId` (String) - ID главы
- `sectionId` (String) - ID раздела
- `title` (String) - заголовок закладки
- `position` (Int) - позиция в тексте
- `timestamp` (Long) - время создания

#### Таблица "notes"
- `id` (Int) - первичный ключ, автоинкремент
- `chapterId` (String) - ID главы
- `sectionId` (String) - ID раздела
- `title` (String) - заголовок заметки
- `content` (String) - содержимое заметки
- `timestamp` (Long) - время создания/обновления

## Пользовательский интерфейс

### Навигация
В приложении используется двухуровневая система навигации:

1. **Основная навигация:**
   - BottomNavigationView для переключения между основными разделами
   - ViewPager2 для плавного переключения между экранами

2. **Детальная навигация:**
   - Navigation Component (NavHostFragment) для навигации внутри разделов
   - Кнопки "Назад" и "Далее" для навигации по учебным материалам

### Основные экраны

#### Главный экран (Dashboard)
- Отображение общего прогресса обучения
- Список последних просмотренных разделов
- Список рекомендованных материалов
- Доступ к полному содержанию учебника

#### Содержание (Content)
- Иерархическое отображение глав и разделов
- Индикаторы прогресса для каждой главы
- Возможность быстрого перехода к определенному разделу

#### Чтение (Reading)
- Отображение учебного материала
- Поддержка различных типов контента:
  - Форматированный текст
  - Код с подсветкой синтаксиса
  - Изображения
  - Таблицы
  - Формулы
  - Видео
  - Интерактивные диаграммы
- Индикатор прогресса чтения
- Кнопки навигации между разделами
- Функция добавления закладок

#### Тесты (Quiz)
- Список доступных тестов с фильтрацией по сложности
- Интерфейс прохождения теста с отображением вопросов
- Экран результатов с подробным разбором ответов

#### Глоссарий (Glossary)
- Алфавитный список терминов
- Поиск и фильтрация по категориям
- Детальная страница термина с определением и связанными материалами

#### Закладки (Bookmarks)
- Список сохраненных закладок
- Интерфейс для управления заметками
- Быстрый переход к сохраненным материалам

#### Настройки (Settings)
- Выбор темы оформления (светлая/темная)
- Настройка размера шрифта
- Управление уведомлениями
- Настройки кэширования данных для офлайн-режима

### Стилизация и дизайн
- Приложение использует Material Design для обеспечения современного и интуитивно понятного интерфейса
- Поддержка светлой и темной темы в соответствии с системными настройками
- Адаптивный дизайн для различных размеров экрана
- Оптимизированная типографика для удобства чтения

## Основные фичи и функциональность

### Система отслеживания прогресса
- Автоматический подсчет прочитанных разделов
- Визуальное отображение прогресса для глав и разделов
- Сохранение последней позиции чтения

### Интерактивное содержимое
- Поддержка различных форматов контента (текст, код, изображения, таблицы)
- Интерактивные диаграммы с возможностью взаимодействия
- Встроенное воспроизведение видео

### Система тестирования
- Разнообразные типы вопросов (выбор одного/нескольких, сопоставление)
- Автоматическая проверка ответов
- Подробные объяснения к правильным ответам
- Отслеживание результатов и прогресса

### Глоссарий терминов
- Поиск терминов по алфавиту и категориям
- Связи между терминами и учебными материалами
- Быстрый доступ к определениям из текста учебника

### Закладки и заметки
- Создание закладок в учебных материалах
- Добавление персональных заметок
- Организация и управление сохраненными материалами

### Офлайн-режим
- Кэширование учебных материалов для работы без подключения к интернету
- Синхронизация прогресса при восстановлении соединения
- Управление объемом кэшированных данных

### Персонализация
- Настройка размера шрифта и темы оформления
- Сохранение индивидуальных настроек
- Рекомендации материалов на основе прогресса

## Алгоритмы и логика работы

### Отслеживание прогресса чтения
Прогресс чтения отслеживается на нескольких уровнях:

1. **Уровень раздела:**
   - При открытии раздела устанавливается начальный прогресс (30%)
   - По мере прокрутки текста прогресс увеличивается
   - При достижении 75% прокрутки раздел считается прочитанным (100%)
   - При явном переходе к следующему разделу текущий отмечается как прочитанный

2. **Уровень главы:**
   - Прогресс главы рассчитывается как процент прочитанных разделов
   - Формула: (количество прочитанных разделов / общее количество разделов) * 100%

3. **Общий прогресс:**
   - Рассчитывается на основе всех прочитанных разделов во всех главах
   - Обновляется при изменении статуса любого раздела

### Алгоритм навигации
1. **Определение следующего/предыдущего раздела:**
   - Поиск текущего раздела в списке всех разделов главы
   - Определение индекса и навигация к соседним элементам
   - При достижении последнего раздела - переход на главный экран

2. **Восстановление позиции чтения:**
   - Сохранение позиции скролла при выходе из раздела
   - Восстановление позиции при повторном открытии
   - Приоритет последней прочитанной позиции при открытии главы

### Синхронизация данных
1. **Загрузка и кэширование:**
   - Приоритет данных из сети при наличии соединения
   - Использование кэшированных данных при отсутствии соединения
   - Фоновая синхронизация при восстановлении соединения

2. **Обработка конфликтов:**
   - Приоритет локальных изменений при конфликтах
   - Объединение прогресса с учетом максимальных значений

### Логика отображения прогресса
```kotlin
// Пример логики обновления прогресса раздела
fun updateSectionProgress(sectionId: String, progress: Int) {
    // Обновляем статус в базе данных, если прогресс больше 75%
    if (progress > 75) {
        userProgressDao.updateSectionReadStatus(sectionId, true)
        
        // Добавляем в кэш завершенных разделов
        if (!completedSections.contains(sectionId)) {
            completedSections.add(sectionId)
        }
    }
    
    // Пересчитываем общий прогресс
    updateOverallProgress(true)
}

// Логика расчета общего прогресса
private suspend fun updateOverallProgress(forceUpdate: Boolean = false) {
    // Получаем количество прочитанных и всех разделов
    val readSectionsCount = sectionDao.getTotalReadSectionsCount()
    val allSectionsCount = sectionDao.getTotalAllSectionsCount()
    
    // Расчет процента
    val calculatedProgress = if (allSectionsCount > 0) {
        (readSectionsCount * 100) / allSectionsCount
    } else {
        0
    }
    
    // Обновляем прогресс в базе данных
    val updatedStats = UserProgressEntity(
        overallProgress = calculatedProgress,
        completedSections = readSectionsCount,
        totalSections = allSectionsCount
    )
    userProgressDao.insertUserProgress(updatedStats)
}
```

## Процесс разработки

### Методология
Проект разрабатывался с использованием agile-методологии:
- Итеративная разработка
- Регулярные обновления и улучшения
- Приоритизация задач на основе пользовательской ценности

### Этапы разработки
1. **Анализ требований**
   - Изучение предметной области
   - Определение ключевых функций и особенностей

2. **Проектирование**
   - Разработка архитектуры приложения
   - Создание прототипов интерфейса
   - Проектирование базы данных

3. **Разработка**
   - Имплементация UI-компонентов
   - Разработка бизнес-логики
   - Интеграция с Firebase
   - Реализация офлайн-функциональности

4. **Тестирование**
   - Модульное тестирование компонентов
   - Интеграционное тестирование
   - UI-тестирование
   - Тестирование на различных устройствах

5. **Оптимизация**
   - Улучшение производительности
   - Оптимизация использования памяти
   - Снижение размера приложения

### Управление версиями
- Использование Git для контроля версий
- Создание feature-веток для разработки новых функций
- Code review перед слиянием изменений
- Семантическое версионирование (SemVer)

## Тестирование

### Модульное тестирование
- Тестирование отдельных компонентов и функций
- Использование JUnit и Mockito
- Имитация зависимостей для изоляции тестов

### Интеграционное тестирование
- Тестирование взаимодействия компонентов
- Проверка взаимодействия с базой данных
- Тестирование навигации между экранами

### UI-тестирование
- Тестирование пользовательского интерфейса с Espresso
- Проверка отображения элементов
- Тестирование пользовательских сценариев

### Ручное тестирование
- Проверка удобства использования (UX)
- Тестирование на различных устройствах и версиях Android
- Проверка офлайн-функциональности

### Мониторинг производительности
- Отслеживание использования памяти
- Анализ времени запуска и отклика
- Оптимизация энергопотребления

## Заключение и дальнейшее развитие

Проект "Электронный учебник по дисциплине 'Параллельная архитектура компьютера и программирования'" представляет собой полноценное мобильное приложение для образовательных целей. Реализованные функции позволяют эффективно изучать материалы, проходить тесты и отслеживать прогресс обучения.

### Ключевые достижения
- Создана надежная и масштабируемая архитектура приложения
- Реализован интуитивно понятный пользовательский интерфейс
- Внедрена система отслеживания прогресса обучения
- Обеспечена поддержка различных типов учебного контента
- Реализована работа в офлайн-режиме

### Направления дальнейшего развития
1. **Расширение функциональности:**
   - Добавление интерактивных симуляций и визуализаций
   - Внедрение системы достижений и геймификации
   - Разработка дополнительных типов тестов и упражнений

2. **Технические улучшения:**
   - Оптимизация производительности и использования памяти
   - Улучшение алгоритмов синхронизации данных
   - Расширение офлайн-возможностей

3. **Расширение платформ:**
   - Разработка версии для iOS
   - Создание веб-версии приложения
   - Интеграция с LMS-системами

4. **Пользовательский опыт:**
   - Улучшение доступности для пользователей с ограниченными возможностями
   - Расширение возможностей персонализации
   - Внедрение аналитики для улучшения UX

Проект имеет большой потенциал для развития и может быть адаптирован для других учебных дисциплин с минимальными изменениями в архитектуре и коде. 